zerops:
  - setup: yew
    build:
      base: rust@1.78
      prepareCommands:
        - curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
        - cargo install --locked trunk
      buildCommands:
        - cargo build --verbose
        - cargo install --locked trunk
        - rustup target add wasm32-unknown-unknown
        - trunk build --release
      deployFiles:
        - dist/~
        - target
        - Cargo.lock
        - Cargo.toml
    run:
      base: rust@1.78
      prepareCommands:
        - curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
        - cargo install --locked trunk
      ports:
        - port: 8080
          httpSupport: true
      start: trunk serve
